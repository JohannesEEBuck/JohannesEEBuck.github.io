/**
 * jqPlot
 * Pure JavaScript plotting plugin using jQuery
 *
 * Version: 1.0.8
 * Revision: 1250
 *
 * Copyright (c) 2009-2013 Chris Leonello
 * jqPlot is currently available for use in all personal or commercial projects 
 * under both the MIT (http://www.opensource.org/licenses/mit-license.php) and GPL 
 * version 2.0 (http://www.gnu.org/licenses/gpl-2.0.html) licenses. This means that you can 
 * choose the license that best suits your project and use it accordingly. 
 *
 * Although not required, the author would appreciate an email letting him 
 * know of any substantial use of jqPlot.  You can reach the author at: 
 * chris at jqplot dot com or see http://www.jqplot.com/info.php .
 *
 * If you are feeling kind and generous, consider supporting the project by
 * making a donation at: http://www.jqplot.com/donate.php .
 *
 * sprintf functions contained in jqplot.sprintf.js by Ash Searle:
 *
 *     version 2007.04.27
 *     author Ash Searle
 *     http://hexmen.com/blog/2007/03/printf-sprintf/
 *     http://hexmen.com/js/sprintf.js
 *     The author (Ash Searle) has placed this code in the public domain:
 *     "This code is unrestricted: you are free to use it however you like."
 * 
 */

!function(t){function e(){this.uid=null,this.type=null,this.gridStart=null,this.gridStop=null,this.tooltipWidthFactor=0,this.options={name:null,show:!0,lineWidth:2,lineCap:"round",color:"#666666",shadow:!0,shadowAngle:45,shadowOffset:1,shadowDepth:3,shadowAlpha:"0.07",xaxis:"xaxis",yaxis:"yaxis",showTooltip:!1,showTooltipPrecision:.6,tooltipLocation:"nw",fadeTooltip:!0,tooltipFadeSpeed:"fast",tooltipOffset:4,tooltipFormatString:"%d, %d",label:null,showLabel:!1,labelLocation:"nw",labelOffset:4,labelAnchor:"end",labelOffsetX:0,labelOffsetY:0}}function s(s){e.call(this),this.type="rectangle";var i={xmin:null,xmax:null,xOffset:"6px",xminOffset:null,xmaxOffset:null,ymin:null,ymax:null,yOffset:"6px",yminOffset:null,ymaxOffset:null};t.extend(!0,this.options,i,s),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function i(s){e.call(this),this.type="line";var i={start:[],stop:[]};t.extend(!0,this.options,i,s),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function o(s){e.call(this),this.type="horizontalLine";var i={y:null,xmin:null,xmax:null,xOffset:"6px",xminOffset:null,xmaxOffset:null};t.extend(!0,this.options,i,s),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function n(s){e.call(this),this.type="dashedHorizontalLine";var i={y:null,xmin:null,xmax:null,xOffset:"6px",xminOffset:null,xmaxOffset:null,dashPattern:[8,8]};t.extend(!0,this.options,i,s),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function a(s){e.call(this),this.type="verticalLine";var i={x:null,ymin:null,ymax:null,yOffset:"6px",yminOffset:null,ymaxOffset:null};t.extend(!0,this.options,i,s),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function l(s){e.call(this),this.type="dashedVerticalLine",this.start=null,this.stop=null;var i={x:null,ymin:null,ymax:null,yOffset:"6px",yminOffset:null,ymaxOffset:null,dashPattern:[8,8]};t.extend(!0,this.options,i,s),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function r(e,s){var i,o,n=t("<div/>");n.addClass("jqplot-canvasOverlay-label"),n.css({position:"absolute",display:"none"}),n.text(s.options.label),n.appendTo(e.targetId),i="start"===s.options.labelAnchor?s.gridStart:s.gridStop,o=n.outerHeight(!0),p(n,s,i,e),o!==n.outerHeight(!0)&&p(n,s,i,e),n.css("display","block")}function p(t,e,s,i){var o=u(t,e.options.labelLocation,e.options.labelOffset,s,i);t.css("left",o.x+e.options.labelOffsetX),t.css("top",o.y+e.options.labelOffsetY)}function h(e,s,i,o){var n,a=e.plugins.canvasOverlay,l=a._tooltipElem,r=s.options;l.html(t.jqplot.sprintf(r.tooltipFormatString,o[0],o[1])),n=u(l,r.tooltipLocation,r.tooltipOffset,i,e),l.css("left",n.x),l.css("top",n.y),r.fadeTooltip?l.stop(!0,!0).fadeIn(r.tooltipFadeSpeed):l.show(),l=null}function u(t,e,s,i,o){var n,a;switch(e){case"nw":n=i[0]+o._gridPadding.left-t.outerWidth(!0)-s,a=i[1]+o._gridPadding.top-s-t.outerHeight(!0);break;case"n":n=i[0]+o._gridPadding.left-t.outerWidth(!0)/2,a=i[1]+o._gridPadding.top-s-t.outerHeight(!0);break;case"ne":n=i[0]+o._gridPadding.left+s,a=i[1]+o._gridPadding.top-s-t.outerHeight(!0);break;case"e":n=i[0]+o._gridPadding.left+s,a=i[1]+o._gridPadding.top-t.outerHeight(!0)/2;break;case"se":n=i[0]+o._gridPadding.left+s,a=i[1]+o._gridPadding.top+s;break;case"s":n=i[0]+o._gridPadding.left-t.outerWidth(!0)/2,a=i[1]+o._gridPadding.top+s;break;case"sw":n=i[0]+o._gridPadding.left-t.outerWidth(!0)-s,a=i[1]+o._gridPadding.top+s;break;case"w":n=i[0]+o._gridPadding.left-t.outerWidth(!0)-s,a=i[1]+o._gridPadding.top-t.outerHeight(!0)/2;break;default:n=i[0]+o._gridPadding.left-t.outerWidth(!0)-s,a=i[1]+o._gridPadding.top-s-t.outerHeight(!0)}return{x:n,y:a}}function c(t,e,s,i){var o=t[0],n=t[1],a=Math.round(s[0]),l=Math.round(s[1]),r=Math.round(e[0]),p=Math.round(e[1]),h=Math.sqrt(Math.pow(a-r,2)+Math.pow(l-p,2)),u=i*h;return Math.abs((r-a)*(n-l)-(p-l)*(o-a))<u}function d(t,e,s,i){var o,n=t[0],a=t[1],l=Math.round(s[0]),r=Math.round(s[1]),p=Math.round(e[0]),h=Math.round(e[1]);return l>p&&(o=l,l=p,p=o),r>h&&(o=r,r=h,h=o),n>=l&&n<=p&&a>=r&&a<=h}function x(t,e,s,i,o){for(var n,a,l=o.plugins.canvasOverlay,r=l.objects,p=r.length,u=!1,x=0;x<p;x++)if(n=r[x],n.options.showTooltip){var f;if(f="rectangle"===n.type?d([e.x,e.y],n.gridStart,n.gridStop,n.tooltipWidthFactor):c([e.x,e.y],n.gridStart,n.gridStop,n.tooltipWidthFactor),s=[o.axes[n.options.xaxis].series_p2u(e.x),o.axes[n.options.yaxis].series_p2u(e.y)],f&&null==l.highlightObjectIndex){switch(n.type){case"line":h(o,n,[e.x,e.y],s);break;case"horizontalLine":case"dashedHorizontalLine":h(o,n,[e.x,n.gridStart[1]],[s[0],n.options.y]);break;case"verticalLine":case"dashedVerticalLine":case"rectangle":h(o,n,[n.gridStart[0],e.y],[n.options.x,s[1]])}l.highlightObjectIndex=x,u=!0;break}if(f&&l.highlightObjectIndex!==x){switch(a=l._tooltipElem,n.fadeTooltip?a.fadeOut(n.tooltipFadeSpeed):a.hide(),n.type){case"line":h(o,n,[e.x,e.y],s);break;case"horizontalLine":case"dashedHorizontalLine":h(o,n,[e.x,n.gridStart[1]],[s[0],n.options.y]);break;case"verticalLine":case"dashedVerticalLine":case"rectangle":h(o,n,[n.gridStart[0],e.y],[n.options.x,s[1]])}l.highlightObjectIndex=x,u=!0;break}if(f){switch(n.type){case"line":h(o,n,[e.x,e.y],s);break;case"horizontalLine":case"dashedHorizontalLine":h(o,n,[e.x,n.gridStart[1]],[s[0],n.options.y]);break;case"verticalLine":case"dashedVerticalLine":case"rectangle":h(o,n,[n.gridStart[0],e.y],[n.options.x,s[1]])}u=!0;break}}u||null===l.highlightObjectIndex||(a=l._tooltipElem,n=l.getObject(l.highlightObjectIndex),n.fadeTooltip?a.fadeOut(n.tooltipFadeSpeed):a.hide(),l.highlightObjectIndex=null)}var f=0;t.jqplot.CanvasOverlay=function(e){var s=e||{};if(this.options={show:t.jqplot.config.enablePlugins,deferDraw:!1},this.objects=[],this.objectNames=[],this.canvas=null,this.markerRenderer=new t.jqplot.MarkerRenderer({style:"line"}),this.markerRenderer.init(),this.highlightObjectIndex=null,s.objects)for(var i,o=s.objects,n=0;n<o.length;n++){i=o[n];for(var a in i)switch(a){case"line":this.addLine(i[a]);break;case"horizontalLine":this.addHorizontalLine(i[a]);break;case"dashedHorizontalLine":this.addDashedHorizontalLine(i[a]);break;case"verticalLine":this.addVerticalLine(i[a]);break;case"dashedVerticalLine":this.addDashedVerticalLine(i[a]);break;case"rectangle":this.addRectangle(i[a])}}t.extend(!0,this.options,s)},t.jqplot.CanvasOverlay.postPlotInit=function(e,s,i){var o=i||{};this.plugins.canvasOverlay=new t.jqplot.CanvasOverlay(o.canvasOverlay)},s.prototype=new e,s.prototype.constructor=s,i.prototype=new e,i.prototype.constructor=i,o.prototype=new e,o.prototype.constructor=o,n.prototype=new e,n.prototype.constructor=n,a.prototype=new e,a.prototype.constructor=a,l.prototype=new e,l.prototype.constructor=l,t.jqplot.CanvasOverlay.prototype.addLine=function(t){var e=new i(t);e.uid=f++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.addHorizontalLine=function(t){var e=new o(t);e.uid=f++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.addDashedHorizontalLine=function(t){var e=new n(t);e.uid=f++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.addVerticalLine=function(t){var e=new a(t);e.uid=f++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.addDashedVerticalLine=function(t){var e=new l(t);e.uid=f++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.addRectangle=function(t){var e=new s(t);e.uid=f++,this.objects.push(e),this.objectNames.push(e.options.name)},t.jqplot.CanvasOverlay.prototype.removeObject=function(e){if("number"==t.type(e))this.objects.splice(e,1),this.objectNames.splice(e,1);else{var s=t.inArray(e,this.objectNames);-1!=s&&(this.objects.splice(s,1),this.objectNames.splice(s,1))}},t.jqplot.CanvasOverlay.prototype.getObject=function(e){if("number"==t.type(e))return this.objects[e];var s=t.inArray(e,this.objectNames);return-1!=s?this.objects[s]:void 0},t.jqplot.CanvasOverlay.prototype.get=t.jqplot.CanvasOverlay.prototype.getObject,t.jqplot.CanvasOverlay.prototype.clear=function(t){this.canvas._ctx.clearRect(0,0,this.canvas.getWidth(),this.canvas.getHeight())},t.jqplot.CanvasOverlay.prototype.draw=function(e){var s,i,o,n=this.objects,a=this.markerRenderer;if(this.options.show){this.canvas._ctx.clearRect(0,0,this.canvas.getWidth(),this.canvas.getHeight());for(var l=0;l<n.length;l++){s=n[l];var p=t.extend(!0,{},s.options);if(s.options.show){switch(a.shadow=s.options.shadow,s.tooltipWidthFactor=s.options.lineWidth/s.options.showTooltipPrecision,s.type){case"line":a.style="line",p.closePath=!1,i=[e.axes[s.options.xaxis].series_u2p(s.options.start[0]),e.axes[s.options.yaxis].series_u2p(s.options.start[1])],o=[e.axes[s.options.xaxis].series_u2p(s.options.stop[0]),e.axes[s.options.yaxis].series_u2p(s.options.stop[1])],s.gridStart=i,s.gridStop=o,a.draw(i,o,this.canvas._ctx,p);break;case"horizontalLine":if(null!=s.options.y){a.style="line",p.closePath=!1;var h,u,c=e.axes[s.options.xaxis],d=e.axes[s.options.yaxis].series_u2p(s.options.y),x=s.options.xminOffset||s.options.xOffset,f=s.options.xmaxOffset||s.options.xOffset;null!=s.options.xmin?h=c.series_u2p(s.options.xmin):null!=x&&("number"==t.type(x)?h=c.series_u2p(c.min+x):"string"==t.type(x)&&(h=c.series_u2p(c.min)+parseFloat(x))),null!=s.options.xmax?u=c.series_u2p(s.options.xmax):null!=f&&("number"==t.type(f)?u=c.series_u2p(c.max-f):"string"==t.type(f)&&(u=c.series_u2p(c.max)-parseFloat(f))),null!=u&&null!=h&&(s.gridStart=[h,d],s.gridStop=[u,d],a.draw([h,d],[u,d],this.canvas._ctx,p))}break;case"dashedHorizontalLine":for(var y=s.options.dashPattern,g=0,m=0;m<y.length;m++)g+=y[m];if(null!=s.options.y){a.style="line",p.closePath=!1;var h,u,c=e.axes[s.options.xaxis],d=e.axes[s.options.yaxis].series_u2p(s.options.y),x=s.options.xminOffset||s.options.xOffset,f=s.options.xmaxOffset||s.options.xOffset;if(null!=s.options.xmin?h=c.series_u2p(s.options.xmin):null!=x&&("number"==t.type(x)?h=c.series_u2p(c.min+x):"string"==t.type(x)&&(h=c.series_u2p(c.min)+parseFloat(x))),null!=s.options.xmax?u=c.series_u2p(s.options.xmax):null!=f&&("number"==t.type(f)?u=c.series_u2p(c.max-f):"string"==t.type(f)&&(u=c.series_u2p(c.max)-parseFloat(f))),null!=u&&null!=h){s.gridStart=[h,d],s.gridStop=[u,d];for(var v,b=Math.ceil((u-h)/g),O=h,m=0;m<b;m++)for(var _=0;_<y.length;_+=2)v=O+y[_],a.draw([O,d],[v,d],this.canvas._ctx,p),O+=y[_],_<y.length-1&&(O+=y[_+1])}}break;case"verticalLine":if(null!=s.options.x){a.style="line",p.closePath=!1;var w,j,P=e.axes[s.options.yaxis],L=e.axes[s.options.xaxis].series_u2p(s.options.x),k=s.options.yminOffset||s.options.yOffset,S=s.options.ymaxOffset||s.options.yOffset;null!=s.options.ymin?w=P.series_u2p(s.options.ymin):null!=k&&("number"==t.type(k)?w=P.series_u2p(P.min-k):"string"==t.type(k)&&(w=P.series_u2p(P.min)-parseFloat(k))),null!=s.options.ymax?j=P.series_u2p(s.options.ymax):null!=S&&("number"==t.type(S)?j=P.series_u2p(P.max+S):"string"==t.type(S)&&(j=P.series_u2p(P.max)+parseFloat(S))),null!=j&&null!=w&&(s.gridStart=[L,w],s.gridStop=[L,j],a.draw([L,w],[L,j],this.canvas._ctx,p))}break;case"dashedVerticalLine":for(var y=s.options.dashPattern,g=0,m=0;m<y.length;m++)g+=y[m];if(null!=s.options.x){a.style="line",p.closePath=!1;var w,j,P=e.axes[s.options.yaxis],L=e.axes[s.options.xaxis].series_u2p(s.options.x),k=s.options.yminOffset||s.options.yOffset,S=s.options.ymaxOffset||s.options.yOffset;if(null!=s.options.ymin?w=P.series_u2p(s.options.ymin):null!=k&&("number"==t.type(k)?w=P.series_u2p(P.min-k):"string"==t.type(k)&&(w=P.series_u2p(P.min)-parseFloat(k))),null!=s.options.ymax?j=P.series_u2p(s.options.ymax):null!=S&&("number"==t.type(S)?j=P.series_u2p(P.max+S):"string"==t.type(S)&&(j=P.series_u2p(P.max)+parseFloat(S))),null!=j&&null!=w){s.gridStart=[L,w],s.gridStop=[L,j];for(var v,b=Math.ceil((w-j)/g),O=w,m=0;m<b;m++)for(var _=0;_<y.length;_+=2)v=O-y[_],v<j&&(v=j),O<j&&(O=j),a.draw([L,O],[L,v],this.canvas._ctx,p),O-=y[_],_<y.length-1&&(O-=y[_+1])}}break;case"rectangle":a.style="line",p.closePath=!0;var h,u,c=e.axes[s.options.xaxis],d=e.axes[s.options.yaxis].series_u2p(s.options.y),x=s.options.xminOffset||s.options.xOffset,f=s.options.xmaxOffset||s.options.xOffset;null!=s.options.xmin?h=c.series_u2p(s.options.xmin):null!=x&&("number"==t.type(x)?h=c.series_u2p(c.min+x):"string"==t.type(x)&&(h=c.series_u2p(c.min)+parseFloat(x))),null!=s.options.xmax?u=c.series_u2p(s.options.xmax):null!=f&&("number"==t.type(f)?u=c.series_u2p(c.max-f):"string"==t.type(f)&&(u=c.series_u2p(c.max)-parseFloat(f)));var w,j,P=e.axes[s.options.yaxis],L=e.axes[s.options.xaxis].series_u2p(s.options.x),k=s.options.yminOffset||s.options.yOffset,S=s.options.ymaxOffset||s.options.yOffset;null!=s.options.ymin?w=P.series_u2p(s.options.ymin):null!=k&&("number"==t.type(k)?w=P.series_u2p(P.min-k):"string"==t.type(k)&&(w=P.series_u2p(P.min)-parseFloat(k))),null!=s.options.ymax?j=P.series_u2p(s.options.ymax):null!=S&&("number"==t.type(S)?j=P.series_u2p(P.max+S):"string"==t.type(S)&&(j=P.series_u2p(P.max)+parseFloat(S))),null!=u&&null!=h&&null!=j&&null!=w&&(s.gridStart=[h,w],s.gridStop=[u,j],this.canvas._ctx.fillStyle=s.options.color,this.canvas._ctx.fillRect(h,w,u-h,j-w))}s.options.showLabel&&r(e,s)}}}},t.jqplot.CanvasOverlay.postPlotDraw=function(){var e=this.plugins.canvasOverlay;e&&e.highlightCanvas&&(e.highlightCanvas.resetCanvas(),e.highlightCanvas=null),e.canvas=new t.jqplot.GenericCanvas,this.eventCanvas._elem.before(e.canvas.createElement(this._gridPadding,"jqplot-overlayCanvas-canvas",this._plotDimensions,this)),e.canvas.setContext(),e.deferDraw||e.draw(this);var s=document.createElement("div");e._tooltipElem=t(s),s=null,e._tooltipElem.addClass("jqplot-canvasOverlay-tooltip"),e._tooltipElem.css({position:"absolute",display:"none"}),this.eventCanvas._elem.before(e._tooltipElem),this.eventCanvas._elem.bind("mouseleave",{elem:e._tooltipElem},function(t){t.data.elem.hide()});var e=null},t.jqplot.postInitHooks.push(t.jqplot.CanvasOverlay.postPlotInit),t.jqplot.postDrawHooks.push(t.jqplot.CanvasOverlay.postPlotDraw),t.jqplot.eventListenerHooks.push(["jqplotMouseMove",x])}(jQuery);