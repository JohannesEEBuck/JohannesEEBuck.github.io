/**
 * jqPlot
 * Pure JavaScript plotting plugin using jQuery
 *
 * Version: 1.0.8
 * Revision: 1250
 *
 * Copyright (c) 2009-2013 Chris Leonello
 * jqPlot is currently available for use in all personal or commercial projects
 * under both the MIT (http://www.opensource.org/licenses/mit-license.php) and GPL
 * version 2.0 (http://www.gnu.org/licenses/gpl-2.0.html) licenses. This means that you can
 * choose the license that best suits your project and use it accordingly.
 *
 * Although not required, the author would appreciate an email letting him
 * know of any substantial use of jqPlot.  You can reach the author at:
 * chris at jqplot dot com or see http://www.jqplot.com/info.php .
 *
 * If you are feeling kind and generous, consider supporting the project by
 * making a donation at: http://www.jqplot.com/donate.php .
 *
 * sprintf functions contained in jqplot.sprintf.js by Ash Searle:
 *
 *     version 2007.04.27
 *     author Ash Searle
 *     http://hexmen.com/blog/2007/03/printf-sprintf/
 *     http://hexmen.com/js/sprintf.js
 *     The author (Ash Searle) has placed this code in the public domain:
 *     "This code is unrestricted: you are free to use it however you like."
 *
 */

!function(t){function i(t,i,e){for(var s,a,h,l=Number.MAX_VALUE,o=0,m=r.length;o<m;o++)(s=Math.abs(e-r[o]))<l&&(l=s,a=r[o],h=n[o]);return[a,h]}t.jqplot.DateAxisRenderer=function(){t.jqplot.LinearAxisRenderer.call(this),this.date=new t.jsDate};var e=864e5,s=30.4368499*e,a=365.242199*e,n=["%M:%S.%#N","%M:%S.%#N","%M:%S.%#N","%M:%S","%M:%S","%M:%S","%M:%S","%H:%M:%S","%H:%M:%S","%H:%M","%H:%M","%H:%M","%H:%M","%H:%M","%H:%M","%a %H:%M","%a %H:%M","%b %e %H:%M","%b %e %H:%M","%b %e %H:%M","%b %e %H:%M","%v","%v","%v","%v","%v","%v","%v"],r=[100,200,500,1e3,2e3,5e3,1e4,15e3,3e4,6e4,12e4,3e5,6e5,9e5,18e5,36e5,72e5,144e5,216e5,288e5,432e5,e,2*e,3*e,4*e,432e6,6048e5,12096e5];t.jqplot.DateAxisRenderer.prototype=new t.jqplot.LinearAxisRenderer,t.jqplot.DateAxisRenderer.prototype.constructor=t.jqplot.DateAxisRenderer,t.jqplot.DateTickFormatter=function(i,e){return i||(i="%Y/%m/%d"),t.jsDate.strftime(e,i)},t.jqplot.DateAxisRenderer.prototype.init=function(i){this.tickOptions.formatter=t.jqplot.DateTickFormatter,this.tickInset=0,this.drawBaseline=!0,this.baselineWidth=null,this.baselineColor=null,this.daTickInterval=null,this._daTickInterval=null,t.extend(!0,this,i);for(var e,s,a,n,r,h,l,o=this._dataBounds,m=0;m<this._series.length;m++){e={intervals:[],frequencies:{},sortedIntervals:[],min:null,max:null,mean:null},s=0,a=this._series[m],n=a.data,r=a._plotData,h=a._stackData,l=0;for(var c=0;c<n.length;c++)"xaxis"==this.name||"x2axis"==this.name?(n[c][0]=new t.jsDate(n[c][0]).getTime(),r[c][0]=new t.jsDate(n[c][0]).getTime(),h[c][0]=new t.jsDate(n[c][0]).getTime(),(null!=n[c][0]&&n[c][0]<o.min||null==o.min)&&(o.min=n[c][0]),(null!=n[c][0]&&n[c][0]>o.max||null==o.max)&&(o.max=n[c][0]),c>0&&(l=Math.abs(n[c][0]-n[c-1][0]),e.intervals.push(l),e.frequencies.hasOwnProperty(l)?e.frequencies[l]+=1:e.frequencies[l]=1),s+=l):(n[c][1]=new t.jsDate(n[c][1]).getTime(),r[c][1]=new t.jsDate(n[c][1]).getTime(),h[c][1]=new t.jsDate(n[c][1]).getTime(),(null!=n[c][1]&&n[c][1]<o.min||null==o.min)&&(o.min=n[c][1]),(null!=n[c][1]&&n[c][1]>o.max||null==o.max)&&(o.max=n[c][1]),c>0&&(l=Math.abs(n[c][1]-n[c-1][1]),e.intervals.push(l),e.frequencies.hasOwnProperty(l)?e.frequencies[l]+=1:e.frequencies[l]=1)),s+=l;if(a.renderer.bands){if(a.renderer.bands.hiData.length)for(var u=a.renderer.bands.hiData,c=0,k=u.length;c<k;c++)"xaxis"===this.name||"x2axis"===this.name?(u[c][0]=new t.jsDate(u[c][0]).getTime(),(null!=u[c][0]&&u[c][0]>o.max||null==o.max)&&(o.max=u[c][0])):(u[c][1]=new t.jsDate(u[c][1]).getTime(),(null!=u[c][1]&&u[c][1]>o.max||null==o.max)&&(o.max=u[c][1]));if(a.renderer.bands.lowData.length)for(var u=a.renderer.bands.lowData,c=0,k=u.length;c<k;c++)"xaxis"===this.name||"x2axis"===this.name?(u[c][0]=new t.jsDate(u[c][0]).getTime(),(null!=u[c][0]&&u[c][0]<o.min||null==o.min)&&(o.min=u[c][0])):(u[c][1]=new t.jsDate(u[c][1]).getTime(),(null!=u[c][1]&&u[c][1]<o.min||null==o.min)&&(o.min=u[c][1]))}for(var v in e.frequencies)e.sortedIntervals.push({interval:v,frequency:e.frequencies[v]});e.sortedIntervals.sort(function(t,i){return i.frequency-t.frequency}),e.min=t.jqplot.arrayMin(e.intervals),e.max=t.jqplot.arrayMax(e.intervals),e.mean=s/n.length,this._intervalStats.push(e),e=s=a=n=r=h=null}o=null},t.jqplot.DateAxisRenderer.prototype.reset=function(){this.min=this._options.min,this.max=this._options.max,this.tickInterval=this._options.tickInterval,this.numberTicks=this._options.numberTicks,this._autoFormatString="",this._overrideFormatString&&this.tickOptions&&this.tickOptions.formatString&&(this.tickOptions.formatString=""),this.daTickInterval=this._daTickInterval},t.jqplot.DateAxisRenderer.prototype.createTicks=function(n){var r,h,l,o,m=(this._ticks,this.ticks),c=this.name,u=this._dataBounds,k=(this._intervalStats,"x"===this.name.charAt(0)?this._plotDimensions.width:this._plotDimensions.height),v=1,d=null;if(null!=this.tickInterval)if(Number(this.tickInterval))d=[Number(this.tickInterval),"seconds"];else if("string"==typeof this.tickInterval){var T=this.tickInterval.split(" ");1==T.length?d=[1,T[0]]:2==T.length&&(d=[T[0],T[1]])}this.tickInterval;r=new t.jsDate(null!=this.min?this.min:u.min).getTime(),h=new t.jsDate(null!=this.max?this.max:u.max).getTime();var g=n.plugins.cursor;g&&g._zoom&&g._zoom.zooming&&(this.min=null,this.max=null);var w=h-r;if(null!=this.tickOptions&&this.tickOptions.formatString||(this._overrideFormatString=!0),m.length){for(o=0;o<m.length;o++){var x=m[o],f=new this.tickRenderer(this.tickOptions);x.constructor==Array?(f.value=new t.jsDate(x[0]).getTime(),f.label=x[1],this.showTicks?this.showTickMarks||(f.showMark=!1):(f.showLabel=!1,f.showMark=!1),f.setTick(f.value,this.name),this._ticks.push(f)):(f.value=new t.jsDate(x).getTime(),this.showTicks?this.showTickMarks||(f.showMark=!1):(f.showLabel=!1,f.showMark=!1),f.setTick(f.value,this.name),this._ticks.push(f))}this.numberTicks=m.length,this.min=this._ticks[0].value,this.max=this._ticks[this.numberTicks-1].value,this.daTickInterval=[(this.max-this.min)/(this.numberTicks-1)/1e3,"seconds"]}else if(null==this.min&&null==this.max&&u.min==u.max){var p=t.extend(!0,{},this.tickOptions,{name:this.name,value:null});this.min=u.min-3e5,this.max=u.max+3e5,this.numberTicks=3;for(var o=this.min;o<=this.max;o+=3e5){p.value=o;var f=new this.tickRenderer(p);this._overrideFormatString&&""!=this._autoFormatString&&(f.formatString=this._autoFormatString),f.showLabel=!1,f.showMark=!1,this._ticks.push(f)}this.showTicks&&(this._ticks[1].showLabel=!0),this.showTickMarks&&(this._ticks[1].showTickMarks=!0)}else if(null==this.min&&null==this.max){var M,_,D=t.extend(!0,{},this.tickOptions,{name:this.name,value:null});if(this.tickInterval||this.numberTicks)this.tickInterval?_=new t.jsDate(0).add(d[0],d[1]).getTime():this.numberTicks&&(M=this.numberTicks,_=(h-r)/(M-1));else{var b=Math.max(k,31),j=115;this.tickRenderer===t.jqplot.CanvasAxisTickRenderer&&this.tickOptions.angle&&(j=115-40*Math.abs(Math.sin(this.tickOptions.angle/180*Math.PI))),M=Math.ceil((b-30)/j+1),_=(h-r)/(M-1)}if(_<=19*e){var I=i(r,h,_),S=I[0];this._autoFormatString=I[1],r=new t.jsDate(r),r=Math.floor((r.getTime()-r.getUtcOffset())/S)*S+r.getUtcOffset(),M=Math.ceil((h-r)/S)+1,this.min=r,this.max=r+(M-1)*S,this.max<h&&(this.max+=S,M+=1),this.tickInterval=S,this.numberTicks=M;for(var o=0;o<M;o++)D.value=this.min+o*S,f=new this.tickRenderer(D),this._overrideFormatString&&""!=this._autoFormatString&&(f.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(f.showMark=!1):(f.showLabel=!1,f.showMark=!1),this._ticks.push(f);v=this.tickInterval}else if(_<=9*s){this._autoFormatString="%v";var q=Math.round(_/s);q<1?q=1:q>6&&(q=6);var F=new t.jsDate(r).setDate(1).setHours(0,0,0,0),y=new t.jsDate(h),H=new t.jsDate(h).setDate(1).setHours(0,0,0,0);y.getTime()!==H.getTime()&&(H=H.add(1,"month"));var R=H.diff(F,"month");M=Math.ceil(R/q)+1,this.min=F.getTime(),this.max=F.clone().add((M-1)*q,"month").getTime(),this.numberTicks=M;for(var o=0;o<M;o++)D.value=0===o?F.getTime():F.add(q,"month").getTime(),f=new this.tickRenderer(D),this._overrideFormatString&&""!=this._autoFormatString&&(f.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(f.showMark=!1):(f.showLabel=!1,f.showMark=!1),this._ticks.push(f);v=q*s}else{this._autoFormatString="%v";var q=Math.round(_/a);q<1&&(q=1);var F=new t.jsDate(r).setMonth(0,1).setHours(0,0,0,0),H=new t.jsDate(h).add(1,"year").setMonth(0,1).setHours(0,0,0,0),O=H.diff(F,"year");M=Math.ceil(O/q)+1,this.min=F.getTime(),this.max=F.clone().add((M-1)*q,"year").getTime(),this.numberTicks=M;for(var o=0;o<M;o++)D.value=0===o?F.getTime():F.add(q,"year").getTime(),f=new this.tickRenderer(D),this._overrideFormatString&&""!=this._autoFormatString&&(f.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(f.showMark=!1):(f.showLabel=!1,f.showMark=!1),this._ticks.push(f);v=q*a}}else{if(k="xaxis"==c||"x2axis"==c?this._plotDimensions.width:this._plotDimensions.height,null!=this.min&&null!=this.max&&null!=this.numberTicks&&(this.tickInterval=null),null!=this.tickInterval&&null!=d&&(this.daTickInterval=d),r==h){r-=432e5,h+=432e5}w=h-r;var A,L;parseInt(Math.max(0,k-100)/100,10);if(A=null!=this.min?new t.jsDate(this.min).getTime():r-w/2*(this.padMin-1),L=null!=this.max?new t.jsDate(this.max).getTime():h+w/2*(this.padMax-1),this.min=A,this.max=L,w=this.max-this.min,null==this.numberTicks)if(null!=this.daTickInterval){var N=new t.jsDate(this.max).diff(this.min,this.daTickInterval[1],!0);this.numberTicks=Math.ceil(N/this.daTickInterval[0])+1,this.max=new t.jsDate(this.min).add((this.numberTicks-1)*this.daTickInterval[0],this.daTickInterval[1]).getTime()}else this.numberTicks=k>200?parseInt(3+(k-200)/100,10):2;v=w/(this.numberTicks-1)/1e3,null==this.daTickInterval&&(this.daTickInterval=[v,"seconds"]);for(var o=0;o<this.numberTicks;o++){var r=new t.jsDate(this.min);l=r.add(o*this.daTickInterval[0],this.daTickInterval[1]).getTime();var f=new this.tickRenderer(this.tickOptions);this.showTicks?this.showTickMarks||(f.showMark=!1):(f.showLabel=!1,f.showMark=!1),f.setTick(l,this.name),this._ticks.push(f)}}this.tickInset&&(this.min=this.min-this.tickInset*v,this.max=this.max+this.tickInset*v),null==this._daTickInterval&&(this._daTickInterval=this.daTickInterval)}}(jQuery);